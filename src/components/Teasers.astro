---
import { getSortedCharacters } from "../js/backend.js";

const { filter } = Astro.props;

const posts = (await getSortedCharacters())!.filter((post) => {
	return !filter || post.data.filters.includes(filter.slug);
});
---

<section class="teasers">
	<ul class="teasers_list">
		{
			posts.map((post) => (
				<li class="teaser transition-teaser">
					<a
						class="teaser_link"
						href={`/character/${post.slug}/`}
						data-tippy="Fragments: <code>#overlay</code>"
					>
						<div
							class="teaser_batch"
							style={`background-color: ${post.data.color};`}
						>
							<div
								class="teaser_image"
								style={{
									backgroundImage: `url(/characters/${post.data.image})`,
								}}
							/>
						</div>
						{post.data.name}
					</a>
				</li>
			))
		}
	</ul>
</section>
